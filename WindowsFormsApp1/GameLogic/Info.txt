ИГРОВЫЕ ИЗМЕНЕНИЯ
PhotosynthesisLayerHeight
не уменьшать энергию при шаге
не 1000 ботов первоначально а 10000
не есть родню
AttackMax
AttackTypeCount
ShieldSum
ShieldMax
ShieldTypeCount
ShieldTypeCountMax
KeptTotalEnergy
AttackTypeCount обязательно один из тех типов что есть в Shield
первых делать сразу с 5000 чтоб они наделились и потом были в равных правах и самые сильные остались


мутация только активных байт
атака-защита: количетсов превышений атаки над защитой умножить на половину BiteEnergy
MutationLenght

мутации 5>1 байт
мутации .1>10 процентов
food tru>false  
SeedBotEnergy 1000>50000
случайное направление
Включен лог
SeedFoodNumber 
FoodEnergy
HoldReproductionTime
GetDirStraight везде настаувил
неподвижные слабо кусают подвижных


СДЕЛАТЬ
лог бота 
решетку из стен
при падении общей энергии добавлять не еду а новых ботов

ВОЗМОЖНЫЕ ОШИБКИ
может ли бот одновременно быть вставлен в оба списка? 

НОВЫЕ ИДЕИ
---фильтры для спиcка геномов
камуфляж
муравьиная дорожка
укусить в направлении зафиксированного бота
общая сумма равна 3 защиты или 3 атаки или 2 защиты и 1 атака. так же здесь может быть фотосинтез
мутируют только активные байты генома
---суммировать количество типов атаки-защиты где превышение а не насколько превышение ???
более массивные расталкивают менее массивных
телепортация
усики как у муравья/таракана
взгляд при каждом ходе - видеть первые три клетки
чем сложнее тем больше выживаемость. вселенная устроена так что есть стремление к усложнению
	напрммер может собрать минералы трех видов будет полная защита
	напрммер собрал минералы 1 3 7 типа - появилось дальнее зрение



ИДЕИ
---удачно мутировавшие гены чтоб больше не мутировали или с меньшей вероятностью?
---наступает только на ту клетку где вокруг нет хищников
возможность периодического изменения направления движения 
todo если геном больше не используется (Bots=0) то удалять геном чтоб память не забивал
есть команды а есть события. событие это когда чтото происходит и начинает выполняться код этого события или 
мутировать может не один байт а несколько или даже все
дальнее зрение
Непонятно переход на клетку если там food mineral organic
todo при поедании если релатив возвращать что просто бот как у foo52 ?
todo в FixChangeCell не перерисовывать если на первоначальном экране ячейка такого же цвета
todo в FixChangeCell перевести на ConcurrentDictionary AddOrUpdate
default: shift = cmdCode; stepComplete = false; break; если cmdCode =0 то что будет? зависнет?
фотосинтез должен давать мало энергии тогда потребуется много команд фотосинтеза в коде и тем самым меньше будут появляться хищники с фотосинтезом
боты притягиваютс к большой массе
по запаху двигается
тащить еду или чтото кудато

СОМНИТЕЛЬНЫЕ ИДЕИ
мина
Стоит ограничение на здоровье и бот не может иметь более 90 единиц здоровья 
радиация, которая действует на ботов в самом верхнем слое мира
При столкновении с другим ботов взрывается


СДЕЛАННЫЕ ИДЕИ
todo при удалении и создании ботов не пересоздавать объект а переиспользовать его
фотосинтез только в верхних слоях
todo размножение делать не на каждом шаге а раз в 10 шагов, а то облепленные другими боты на каждом шаге не могут размножиться
смерть бота: после смерти должна сохраниться общая масса все оргпнизмов или общая энергия
кнопка посчитать суммарную энергию
Незавершающая команда может выполняться до 10 раз после чего управлдение будет передано другому боту
Неизвестная команда является безусловным переходом



ЯД
добавить обработку если наступил на яд
если бот зайдет на клетку с ядом то он погибнет
Если вначале схватить яд то он преобразуется в еду
_healthPointChange = -PoisonDamage;



СВОЙ-ЧУЖОЙ 
Боты отличают чужого от своего, если код-геном отличается более, чем на один байт. 


ЦВЕТ БОТА
В стандартном режиме цвет зависит от способа получения энергии. Любители фотосинтеза зеленеют, любители «минералов» синеют, а мясоеды краснеют.
У всеядных может быть промежуточный цвет.
В режиме отображения энергии, чем больше энергии, тем бот краснее, чем меньше энергии, тем бот желтее.


АТАКА-ЗАЩИТА
Как-то надо сделать борьбу ботов неравной. Сейчас пока думаю у ботов должны быть различные уровни защиты. 
Первоначально защита простейшая. Потом защита начинает эволюционаровать. Как и нападение.
Возможно неплохая идея с минералами - от количества накопленных минералов зависит жесткость защиты
Минералы могут быть различными. Бот может перерабатывать энергию в минералы.
Нападение как и защита бота зависит еще от его массы и энергии?
Дробное изменение: один бот забирает 1000 другой 950
Бот поел минералов у него повысился уровнеь защиты . поел 100 минералов при укусе тратится накопленные минералы а не энергия

МАССА
---при каждой мутации масса может меняться вверх или вниз процентов на 10


ВОЗРАСТ = ЗДОРОВЬЕ = ЭНЕРГИЯ
У бота есть здоровье и каждый ход оно уменьшается на единицу.
Если дойдет до 0 то бот умирает.

ПИТАНИЕ

СТЕНА
бот упирается в стену
сделать клетку из стен

ТИПЫ КОНТЕНТА КЛЕТОК
c >= 65500 зарезервированы
0 - пусто
1-65499 - bots
65500 - food
65501 - organic
65502 - mineral
65503 - wall
65504 - poison


ЕСЛИ РЯДОМ НЕТ СВОБОДНОЙ ЯЧЕЙКИ
просто накапливать энергию дальше
передать энергию соседу
в случайном месте создать нового бота
в ближайшем пустом месте создать нового бота
в ближайшем пустом месте рядом с родственником (найти по цепочке родственников бота с пустыми соседними ячейками)
умереть
взорваться
создавать бота на Organic, Mineral, Poison(?), Grass
сделать чтобы если нет места для появления бота на каждом шаге не была очередная попытка воспроизводства
если готов поделиться но вокруг все клетки заняты, то сам умирает а на его месте появляется потомок
телепортация на свободжное место

КООРДИНАТЫ БОТА НА ЭКРАНЕ
Координаты бота могут быть от 0 до _data.WorldWidth-1 включительно и по y также
допустим WorldWidth=500 и cellwidth =2 тогда крайнее левопе положение бота 0,1 , а правое положение бота 998,999
Координаты LensX могут быть от 0 до _data.WorldWidth - _data.LensWidth включительно и по y также
Допустим размер линзы 20  (cellwidth =2) и она прижата в левый верхний угол
тогда левая и верхняя  граница будут идти по 0(реальный)
а правая и нижняя по 39 


КОМАНДЫ ДЕЙСТВИЙ
сменить направление относительно   ....
сменить направление абсолютно   ....
фотосинтез ................
шаг  в относительном напралении  .................    
шаг   в абсолютном направлении     .................    
съесть в относительном напралении       ...............
съесть  в абсолютном направлении      ...............
посмотреть  в относительном напралении ...................................
посмотреть в абсолютном направлении ...................................
делится   в относительном напралении  - если у бота больше энергии или минералов, чем у соседа, то они распределяются поровну 
делится  в абсолютном направлении ........................
отдать - безвозмездно отдать часть энергии и минералов соседу в относительном напралении  ........................
отдать - безвозмездно отдать часть энергии и минералов соседу в абсолютном направлении  ........................
поделиться энергией
выравнится по горизонтали  ...............................
многоклеточность ( создание потомка, приклееного к боту )......
деление (создание свободноживущего потомка) ................
преобразовать минералы в энерию ...................
мутировать   ................................... 
спорная команда, во время её выполнения меняются случайным образом две случайные команды 
читал, что микроорганизмы могут усилить вероятность мутации своего генома в неблагоприятных условиях       
генная атака  ...................................
---команда периодической смены направления при определенной вероятности направление менятеся случайно или нет
---поменять направление на противоположное
бот может взорваться при определенных условиях
притворится мертвым или стеной
---случайное направление , допустим цифра 8 (0-7 это обычные направления)
делиться - если у бота больше энергии или минералов, чем у соседа, то они распределяются поровну          
команда перехода на случайное количество шагов в программе
притянуть бота
притянуться к боту
дальнее зрение

УСЛОВНЫЕ КОМАНДЫ
---много ли осталось родни? 
---сколько энергии?
---условие от возраста
условие от кол-ва окружающих
---условие от высоты
какой мой уровень?
какое моё здоровье
сколько  минералов
окружен ли бот    ................
приход энергии есть? ........................
минералы прибавляются? ............................
многоклеточный ли я ? ........................ 
много ли осталось пищи таокго типа - может пока не есть пусть размножится
далеко ли я от центра племени (для появления роев)
какое сейчас время суток - в зависимости от времени суток меняеьтся поведения бота - может утром он стремится вверх после обеда вниз
какое сейчас время года - в зависимости от времени года меняеьтся поведения бота - может зимой он стремится вверх летом вниз

КОМАНДЫ РЕАКЦИИ
объединяться при нападении вокруг альфы
возмодны события укус с различной стороны, также таймер или достижение какого то возраста или ...
если рядом бот большей массы то удирать



СТАРОЕ
--------------
-------------- 

АЛГОРИТМ ДВИЖЕНИЯ
Алгоритм:
1. Суммируем направление бота и движения
2. По полученному суммарному направлению вычисляем дельта координаты клетки на которую предполагается передвинуться
3. Узнаем что находится на этой клетке
4.1. Переход на клетку если там free poison
4.2. Не переход на клетку если там  wall edge
4.3. Непонятно переход на клетку если там  food mineral organic

ПИТАНИЕ
Боту нужно найти еду которая добавляет 10 к здоровью.
Еду можно съесть зайдя на клетку с едой или схватив еду из соседней клетки

РАЗМНОЖЕНИЕ
1. из 64 осталось 8 ботов. каждому добавляем 7 копий в любом месте, одна из которых мутант.
2. бот как набрал достаточно энергии создает свою копию с каким-то процентом мутации.
Когда отпочковывается новый бот, он встраивается в цепочку ботов перед предком.
боты переполнены энергией и они должны отпочкавать потомка, но свободного места нет и они погибают

КОМАНДЫ
КОМАНДЫ 0-63								Завершающая	Указатель
0-7		сделать шаг							З			*	Направление зависит от числа и куда повернут бот в текущий момент.
8-15	схватить еду или нейтрализовать яд	З			*
16-23	посмотреть							Н			*	Бот остается на месте
24-31	поворот								Н			1
32-63	безусловный переход					Н
25 - Фотосинтез		1						З

Незавершающая команда может выполняться до 10 раз после чего управлдение будет передано другому боту
Неизвестная команда является безусловным переходом

(*)Указатель команды перемещается в зависимости от того что было в этом направлении
1й Вариант
яд - 1
стена - 2
бот - 3
еда - 4
пусто - 5

2й Вариант
пусто - 2
стена - 3
органика - 4
бот - 5
родня - 6
чужой - 7


Поворот бота
24 - 0
25 - 45
26 - 90
27 - 135
28 - 180
29 - 225
30 - 270
31 - 315

КОМАНДЫ FOO52
if $cyc < 15  // разрешенно не более 15 команд

if ($command == 23) сменить направление относительно
if ($command == 24) сменить направление абсолютно
if ($command == 25) фотосинтез
if ($command == 26) шаг  в относительном напралении
if ($command == 27) шаг   в абсолютном направлении
if ($command == 28) съесть в относительном напралении
if ($command == 29) съесть  в абсолютном направлении
if ($command == 30) посмотреть в относительном напралении
if ($command == 31) посмотреть в абсолютном направлении
if (($command == 32) || ($command == 42)) делиться - если у бота больше энергии или минералов, чем у соседа, то они распределяются поровну. делится в относительном напралении
if (($command == 33) || ($command == 51)) делиться - если у бота больше энергии или минералов, чем у соседа, то они распределяются поровну. делится в абсолютном направлении
if (($command == 34) || ($command == 50) ) отдать - безвозмездно отдать часть энергии и минералов соседу. отдать в относительном напралении
if (($command == 35) || ($command == 52) ) отдать - безвозмездно отдать часть энергии и минералов соседу. отдать в абсолютном направлении
if ($command == 36) выравнится по горизонтали
if ($command == 37) какой мой уровень (на какой высоте бот)
if ($command == 38) какое моё здоровье
if ($command == 39) сколько  минералов
if ($command == 40) многоклеточность ( создание потомка, приклееного к боту )
if ($command == 41) деление (создание свободноживущего потомка)
if ($command == 43) окружен ли бот
if ($command == 44) приход энергии есть?
if ($command == 45) минералы прибавляются?
if ($command == 46) многоклеточный ли я ?
if ($command == 47) преобразовать минералы в энерию
if ($command == 48) мутировать. спорная команда, во время её выполнения меняются случайным образом две случайные команды. читал, что микроорганизмы могут усилить вероятность мутации своего генома в неблагоприятных условиях
if ($command == 49) генная атака

Если ни с одной команд не совпало значит безусловный переход. Прибавляем к указателю текущей команды значение команды.
----------------------------
